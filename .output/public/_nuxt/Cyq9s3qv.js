import{_ as T}from"./C5KoYXvH.js";import{_ as A}from"./BYdc3zRc.js";import{f as r}from"./BrZZEpxw.js";import"./CQW_vi0x.js";import{a as D}from"./DB3FtL0z.js";import{d as w,O as I,F as R,r as s,k as d,y as B,C as p,D as i,H as e,I as S,z as H,A as l,B as c,_ as N}from"./CThe8rmN.js";import{u as M}from"./BTM_bmsK.js";import{a as P}from"./nvZ7vHZN.js";import"./Cqk5BQ_7.js";import"./C4IxTLi6.js";const F={class:"text-red"},G={class:"text-red"},O={class:"text-error"},V=w({__name:"transaction-history",setup(z){I();const{t:m}=R(),{onGetterMasterData:y}=M(),_=[{title:"Thông tin khách hàng",key:"customerInfo",sortable:!1},{title:"Chi tiết gói",key:"rentalNote",sortable:!1},{title:"Hoa hồng (%)",key:"commissionRate",sortable:!1},{title:"Giá gói",key:"basePrice",align:"end",sortable:!1},{title:"Thành tiền",key:"paymentAmount",align:"end",sortable:!1},{title:"Tiền nhận được",key:"commissionAmount",align:"end",sortable:!1},{title:"Ngày giao dịch",key:"createdAt",sortable:!1},{title:"Trạng thái",key:"status",align:"center",sortable:!1}],f=s({}),n=s(""),h=s(null),g=s(null),b=d(()=>P?.map(t=>({...t,title:m(t.title)}))),k=d(()=>y.value["transaction-months"]?.map(t=>({title:m(t.title),value:t.value}))||[]);async function C(t){const u={...t};n.value="load-table",await D.getTransactionHistory(u).then(o=>{o.data&&(f.value=o.data)}).finally(()=>{n.value=""})}return(t,u)=>{const o=T,v=A;return H(),B(S,null,[p(o,{ref_key:"confirmDialogRef",ref:g},null,512),p(v,{ref_key:"dataTableRef",ref:h,filters:[{label:"Thời gian",field:"monthYear",type:"select",items:e(k)},{label:"Trạng thái",field:"status",type:"select",items:e(b)}],showSelect:!1,actions:[],rowActions:["register"],headers:_,data:e(f),loading:e(n)=="load-table",onChange:C},{"row-basePrice":i(({item:a})=>[l("div",F,c(("formatCurrency"in t?t.formatCurrency:e(r))(a.basePrice)),1)]),"row-paymentAmount":i(({item:a})=>[l("div",G,c(("formatCurrency"in t?t.formatCurrency:e(r))(a.paymentAmount)),1)]),"row-commissionAmount":i(({item:a})=>[l("div",O,c(("formatCurrency"in t?t.formatCurrency:e(r))(a.commissionAmount)),1)]),_:1},8,["filters","data","loading"])],64)}}}),U=N(V,[["__scopeId","data-v-316332c1"]]);export{U as default};
