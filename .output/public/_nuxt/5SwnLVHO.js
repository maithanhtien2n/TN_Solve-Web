import{_ as x}from"./C5KoYXvH.js";import{_ as D}from"./BYdc3zRc.js";import{f as m}from"./BrZZEpxw.js";import"./CQW_vi0x.js";import{a as w}from"./DB3FtL0z.js";import{d as R,O as T,F as I,r as s,k as u,y as B,C as i,D as r,H as a,I as N,z as A,g as E,E as P,B as l,A as d,_ as V}from"./CThe8rmN.js";import{u as F}from"./BTM_bmsK.js";import{e as G}from"./nvZ7vHZN.js";import"./Cqk5BQ_7.js";import"./C4IxTLi6.js";const H={class:"text-red"},M={class:"text-error"},O=R({__name:"service-rentals",setup($){const _=T(),{t:c}=I(),{onGetterMasterData:y}=F(),h=[{title:"Họ và tên",key:"accountId.name",sortable:!1},{title:"Chi tiết gói",key:"note",sortable:!1},{title:"Ngày bắt đầu",key:"serviceStartDate",sortable:!1},{title:"Ngày hết hạn",key:"serviceExpiry",sortable:!1},{title:"Giá gói",key:"basePrice",align:"end",sortable:!1},{title:"Thành tiền",key:"price",align:"end",sortable:!1},{title:"Cập nhật",key:"updatedAt",sortable:!1},{title:"Trạng thái",key:"expiryStatus",align:"center",sortable:!1}],p=s({}),n=s(""),g=s(null),v=s(null),b=u(()=>G?.map(e=>({...e,title:c(e.title)})));u(()=>y.value["rental-months"]?.map(e=>({title:c(e.title),value:e.value}))||[]);async function k(e){const f={...e,expiry:_.path?.split("/")?.pop()||"active"};n.value="load-table",await w.getAllServiceRental(f).then(o=>{o.data&&(p.value=o.data)}).finally(()=>{n.value=""})}return(e,f)=>{const o=x,C=E("v-chip"),S=D;return A(),B(N,null,[i(o,{ref_key:"confirmDialogRef",ref:v},null,512),i(S,{ref_key:"dataTableRef",ref:g,filters:[{label:"Trạng thái",field:"expiryStatus",type:"select",items:a(b)}],showSelect:!1,actions:[],rowActions:["register"],headers:h,data:a(p),loading:a(n)=="load-table",onChange:k},{"row-basePrice":r(({item:t})=>[d("div",H,l(("formatCurrency"in e?e.formatCurrency:a(m))(t.basePrice)),1)]),"row-price":r(({item:t})=>[d("div",M,l(("formatCurrency"in e?e.formatCurrency:a(m))(t.price)),1)]),"row-expiryStatus":r(({item:t})=>[i(C,{color:t?.expiryStatus=="Đã hết hạn"?"red":"success"},{default:r(()=>[P(l(e.$t(t?.expiryStatus)),1)]),_:2},1032,["color"])]),_:1},8,["filters","data","loading"])],64)}}}),Y=V(O,[["__scopeId","data-v-1b0306e3"]]);export{Y as default};
