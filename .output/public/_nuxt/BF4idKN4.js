import{_ as E}from"./B8y88hpV.js";import{f as k}from"./BrZZEpxw.js";import{u as M,a as O}from"./CQW_vi0x.js";import{u as P}from"./Cqk5BQ_7.js";import{d as F,r as C,k as Y,L as J,N as x,D as a,g as i,z as _,C as e,A as o,H as n,V as $,E as m,B as d,y as K,G as q}from"./CThe8rmN.js";const Q={class:"mt-3"},W={class:"d-flex ga-3 mt-6"},X={class:"font-bold"},Z={class:"mt-1"},tt={class:"font-bold"},nt={class:"mb-2 font-bold"},et={class:"font-bold text-success-darken-1 my-2"},at={key:0,class:"text-caption text-error mt-2"},ot={class:"pl-5 text-medium-emphasis"},h=1e5,mt=F({__name:"payment",setup(lt){const{width:w}=P(),{onGetterUserData:c,onActionGetUserData:B}=M(),f=C(!1),p=C(null),r=Y(()=>c.value?.settings?.paymentInfo||{}),s=J({bankName:r.value?.bankName||"",accountName:r.value?.accountName||"",accountNumber:r.value?.accountNumber||""}),N=C(""),D=()=>{s.bankName=r.value?.bankName||"",s.accountName=r.value?.accountName||"",s.accountNumber=r.value?.accountNumber||"",p.value?.onDisplay(!0)},S=async()=>{N.value="save-payment-info",await O.saveSetting({paymentInfo:JSON.stringify(s)}).then(async()=>{await B(),p.value?.onDisplay(!1)}).finally(()=>{N.value=""})},T=async()=>{if(c.value?.referralLink)try{await navigator.clipboard.writeText(c.value?.referralLink),f.value=!0,setTimeout(()=>{f.value=!1},2e3)}catch(l){console.error("Failed to copy referral code: ",l)}};return(l,t)=>{const v=i("v-text-field"),y=i("v-btn"),I=E,b=i("v-icon"),L=i("v-card-title"),U=i("v-card-item"),V=i("v-sheet"),A=i("v-list-item"),g=i("v-card-text"),G=i("v-divider"),H=i("v-card"),R=i("v-col"),j=i("v-row"),z=i("v-container");return _(),x(z,{fluid:"",class:"ma-0 pa-0"},{default:a(()=>[e(I,{ref_key:"commonDialogRef",ref:p,title:"Thông tin thanh toán",width:"500"},{default:a(()=>[o("div",Q,[e(v,{modelValue:n(s).bankName,"onUpdate:modelValue":t[0]||(t[0]=u=>n(s).bankName=u),class:"w-100",variant:"outlined",label:l.$t("Tên ngân hàng (Ví dụ: ACB, Vietcombank...)")},null,8,["modelValue","label"]),e(v,{modelValue:n(s).accountName,"onUpdate:modelValue":t[1]||(t[1]=u=>n(s).accountName=u),class:"w-100",variant:"outlined",label:l.$t("Tên chủ tài khoản (Viết hoa, không dấu)")},null,8,["modelValue","label"]),e(v,{modelValue:n(s).accountNumber,"onUpdate:modelValue":t[2]||(t[2]=u=>n(s).accountNumber=u),class:"w-100",variant:"outlined",label:l.$t("Số tài khoản")},null,8,["modelValue","label"])]),o("div",W,[e(y,{text:"Hủy bỏ",class:"flex-1",variant:"tonal",color:"primary",style:{height:"48px"},onClick:t[3]||(t[3]=u=>n(p)?.onDisplay(!1))}),e(y,{text:"Lưu thông tin",class:"flex-1",variant:"flat",color:"primary",style:{height:"48px"},disabled:!n(s).bankName||!n(s).accountName||!n(s).accountNumber,loading:n(N)==="save-payment-info",onClick:S},null,8,["disabled","loading"])])]),_:1},512),e(j,{justify:"center",class:""},{default:a(()=>[e(R,{cols:"12",md:"10",lg:"7"},{default:a(()=>[e(H,{variant:"outlined",class:$(["py-3 pb-6",`${n(w)>550?"px-2":"px-0"}`])},{default:a(()=>[e(U,null,{default:a(()=>[e(L,{class:"d-flex align-center"},{default:a(()=>[e(b,{class:"mr-2"},{default:a(()=>[...t[8]||(t[8]=[m("mdi-bank",-1)])]),_:1}),t[9]||(t[9]=m(" Thông tin thanh toán ",-1))]),_:1})]),_:1}),e(g,{class:"mt-3 pb-0"},{default:a(()=>[!n(r).bankName||!n(r).accountName||!n(r).accountNumber?(_(),x(V,{key:0,color:"orange",variant:"tonal",class:"pa-4 d-flex align-center justify-space-between rounded-lg"},{default:a(()=>[o("div",null,[o("div",X,d(l.$t("BẠN CHƯA THÊM NGÂN HÀNG")),1),o("div",Z,d(l.$t("Vui lòng thêm thông tin để có thể rút tiền.")),1)]),e(y,{icon:"",variant:"text",style:{height:"48px"},onClick:t[4]||(t[4]=u=>n(p)?.onDisplay(!0))},{default:a(()=>[e(b,null,{default:a(()=>[...t[10]||(t[10]=[m("mdi-plus-circle-outline",-1)])]),_:1})]),_:1})]),_:1})):(_(),x(V,{key:1,variant:"outlined",class:"rounded-lg"},{default:a(()=>[e(A,{class:"pa-0"},{append:a(()=>[e(y,{icon:"",variant:"text",style:{height:"48px"},onClick:t[5]||(t[5]=u=>D())},{default:a(()=>[e(b,null,{default:a(()=>[...t[11]||(t[11]=[m("mdi-pencil-outline",-1)])]),_:1})]),_:1})]),default:a(()=>[o("h3",tt,d(n(r)?.accountName),1),o("h3",null,d(n(r)?.accountNumber),1),o("h3",null,d(n(r)?.bankName),1)]),_:1})]),_:1}))]),_:1}),e(g,{class:"pb-7"},{default:a(()=>[o("h3",nt,d(l.$t("LINK GỚI THIỆU CỦA BẠN")),1),e(v,{modelValue:n(c).referralLink,"onUpdate:modelValue":t[6]||(t[6]=u=>n(c).referralLink=u),readonly:"","hide-details":"",variant:"outlined",title:"Sao chép mã",style:{cursor:"pointer"},color:n(f)?"success":"default","append-inner-icon":n(f)?"mdi-check":"mdi-content-copy","onClick:appendInner":t[7]||(t[7]=u=>T())},null,8,["modelValue","color","append-inner-icon"])]),_:1}),e(G,{class:"my-3 mx-4"}),e(g,{class:"text-center"},{default:a(()=>[t[13]||(t[13]=o("div",{class:"text-grey-darken-1"},"Số dư có thể rút",-1)),o("h1",et,d(("formatCurrency"in l?l.formatCurrency:n(k))(n(c)?.pendingBalance)),1),o("div",{class:$(["w-100 cta-button justify-center mt-6",{disabled:n(c)?.pendingBalance<h}]),style:{"border-radius":"6px",margin:"auto","max-width":"26rem"}},[e(b,{size:"27"},{default:a(()=>[...t[12]||(t[12]=[m("mdi-bank-transfer-out",-1)])]),_:1}),o("h3",null,d(l.$t("Yêu cầu rút tiền")),1)],2),n(c)?.pendingBalance<h?(_(),K("div",at," ("+d(`${l.$t("Số dư tối thiểu để rút là")} ${("formatCurrency"in l?l.formatCurrency:n(k))(h)}`)+" ) ",1)):q("",!0)]),_:1})]),_:1},8,["class"]),e(g,null,{default:a(()=>[t[19]||(t[19]=o("h2",{class:"mb-2 font-bold"},"Lưu ý khi rút tiền",-1)),o("ul",ot,[o("li",null,[t[14]||(t[14]=m(" Số dư tối thiểu để thực hiện yêu cầu là ",-1)),o("b",null,d(("formatCurrency"in l?l.formatCurrency:n(k))(h)),1),t[15]||(t[15]=m(". ",-1))]),t[16]||(t[16]=o("li",null,[m(" Các yêu cầu rút tiền sẽ được xử lý và thanh toán vào "),o("b",null,"ngày 15"),m(" hàng tháng. ")],-1)),t[17]||(t[17]=o("li",null," Vui lòng đảm bảo thông tin ngân hàng chính xác. Chúng tôi không chịu trách nhiệm nếu bạn nhập sai thông tin. ",-1)),t[18]||(t[18]=o("li",null,' Số dư chờ thanh toán (`PENDING`) mới được tính vào số dư có thể rút. Các khoản "Chờ chốt %" sẽ được xử lý vào cuối tháng. ',-1))])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{mt as default};
