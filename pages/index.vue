<script setup lang="ts">
const router = useRouter();
const localePath = useLocalePath();

const { t, locale } = useI18n();
const { width, isMobile } = useDevice();

const { onGetterUserData: userData } = useAppStore();
const { onGetterMasterData } = useMasterDataStore();

const client = computed<boolean>(() => {
  const win = window as any;
  return !!(win?.electronAPI && win?.electronAPI?.isElectron);
});

const appVersionDownload = computed(
  () => onGetterMasterData.value["app-version"] || ""
);
const appVersion = computed(() => {
  let result = appVersionDownload.value?.split("/")?.pop();
  return result;
});

useSeo({
  title: t("Trang chá»§"),
  description:
    "Ná»n táº£ng AI giÃºp báº¡n táº¡o video chuyÃªn nghiá»‡p chá»‰ trong vÃ i phÃºt",
  image: "/images/page-home.png",
});
</script>

<template>
  <div
    v-if="
      !userData ||
      (userData?.role !== EnumAccountRole.ADMIN && !userData?.remainingTime)
    "
  >
    <div
      v-if="locale === 'vi'"
      class="mt-10 mb-3 d-flex flex-column align-center text-center ga-2"
    >
      <h3 v-if="isMobile" class="font-bold text-red" style="font-size: 1.2rem">
        ğŸ’¥ <span class="text-primary text-2xl">GIÃ Æ¯U ÄÃƒI</span> â€” Chá»‰
        <span class="text-2xl text-primary">99.000Ä‘/thÃ¡ng</span>!
      </h3>

      <h1 v-else class="font-bold text-red">
        ğŸ’¥
        <span class="text-primary font-bold" style="font-size: 2rem">
          GIÃ Æ¯U ÄÃƒI
        </span>
        â€” Chá»‰
        <span class="text-primary font-bold" style="font-size: 2rem">
          99.000Ä‘/thÃ¡ng
        </span>
        !
      </h1>

      <p
        class="text-gray-600 max-w-md"
        :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }"
      >
        Tráº£i nghiá»‡m khÃ´ng giá»›i háº¡n toÃ n bá»™ tÃ­nh nÄƒng cao cáº¥p, cÃ²n cháº§n chá» gÃ¬
        ná»¯a!
      </p>

      <div :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }">
        ğŸ“Œ ÄÄƒng kÃ½ dá»‹ch vá»¥
        <span
          class="text-primary font-semibold cursor-pointer"
          style="text-decoration: underline"
          @click="router.push(localePath('/payment'))"
        >
          táº¡i Ä‘Ã¢y
        </span>
        hoáº·c liÃªn há»‡ <br v-if="width < 560" />
        Zalo
        <a
          :href="'https://zalo.me/0343027232'"
          target="_blank"
          class="text-primary font-semibold hover:underline"
          style="text-wrap: nowrap"
        >
          034 302 7232
        </a>
        Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£.
      </div>

      ğŸ‘‡

      <div class="d-flex flex-column">
        <span :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }">
          ğŸ“¢ Cáº­p nháº­t tin tá»©c, tÃ­nh nÄƒng má»›i má»—i ngÃ y
        </span>

        <div>
          <a target="_blank" href="https://zalo.me/g/tuhmrl934">
            Tham gia nhÃ³m Zalo Tool AI TN Solve
          </a>
        </div>
      </div>
    </div>
  </div>

  <div
    v-if="userData?.role === EnumAccountRole.ADMIN || userData?.remainingTime"
    class="text-center mt-10"
  >
    <!-- <h3 v-if="isMobile" class="text-primary" style="font-size: 1.2rem">
      ğŸ‰ CHÃ€O Má»ªNG Báº N Äáº¾N TN SOLVE
    </h3> -->

    <h1 v-if="!isMobile" class="font-bold text-primary" style="font-size: 2rem">
      ğŸ‰ CHÃ€O Má»ªNG Báº N Äáº¾N Vá»šI TN SOLVE
    </h1>

    ğŸ‘‡

    <div class="d-flex flex-column">
      <span :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }">
        ğŸ“¢ Cáº­p nháº­t tin tá»©c, tÃ­nh nÄƒng má»›i má»—i ngÃ y
      </span>

      <div>
        <a target="_blank" href="https://zalo.me/g/tuhmrl934">
          Tham gia nhÃ³m Zalo Tool AI TN Solve
        </a>
      </div>
    </div>
  </div>

  <div class="mt-8 mb-6 text-center mx-auto" style="max-width: 700px">
    <div
      class="py-3 px-4 rounded-lg d-inline-flex align-center justify-center flex-wrap ga-3"
      style="
        background-color: #fff3e0;
        border: 2px solid #ffb74d;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      "
    >
      <span
        :style="{ 'font-size': isMobile ? '1rem' : '1.15rem' }"
        class="font-bold"
        style="line-height: 1rem"
      >
        <v-icon color="red" size="large" class="mb-1">mdi-youtube</v-icon>
        Xem video hÆ°á»›ng dáº«n Ä‘Äƒng kÃ½/gia háº¡n giÃ¡ sá»‘c
        <span class="text-red font-bold mr-1">69K</span>
      </span>
      <a
        href="https://youtu.be/XyHbjH2myy8"
        target="_blank"
        class="v-btn bg-red-darken-1 v-btn--density-default v-btn--size-default px-6 font-bold text-white"
        style="text-decoration: none; letter-spacing: 0.5px"
      >
        XEM NGAY
        <v-icon right class="ml-1">mdi-open-in-new</v-icon>
      </a>
    </div>
  </div>

  <div v-if="!client && !isMobile && appVersionDownload" class="section my-10">
    <div class="download-wrap">
      <div class="download-left">
        <div
          class="download-title"
          :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }"
        >
          Táº£i cÃ´ng cá»¥ TN Solve báº£n má»›i nháº¥t
          <span class="text-primary font-bold">
            {{ appVersion }}
          </span>
          vá» mÃ¡y tÃ­nh
        </div>
        <div
          class="download-desc"
          :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }"
        >
          CÃ i Ä‘áº·t trÃªn Windows Ä‘á»ƒ sá»­ dá»¥ng nhanh vÃ  á»•n Ä‘á»‹nh hÆ¡n.
        </div>
      </div>

      <a
        class="download-btn"
        :href="appVersionDownload"
        target="_blank"
        rel="noopener"
      >
        <v-icon size="22" class="icon-win">mdi-microsoft-windows</v-icon>
        <span :style="{ 'font-size': isMobile ? '1rem' : '1.2rem' }">
          Táº£i cho Windows
        </span>
      </a>
    </div>
  </div>

  <div class="my-10 d-flex justify-center">
    <div class="video-wrap">
      <div class="video-frame">
        <iframe
          width="706"
          height="400"
          src="https://www.youtube.com/embed/dCb8hL7wLAM"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          referrerpolicy="strict-origin-when-cross-origin"
          allowfullscreen
        />
      </div>
    </div>
  </div>

  <ButtonCreateVideo class="mt-10" />
</template>

<style scoped>
/* ====== Video ====== */
.video-wrap {
  width: 100%;
  max-width: 980px;
}
.video-head {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}
.video-title {
  font-weight: 900;
  color: #0f172a;
  letter-spacing: -0.2px;
}
.video-frame {
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.1);
}
.video-frame iframe {
  display: block;
  width: 100%;
  aspect-ratio: 16/9;
  height: auto;
  border: 0;
}

/* Táº£i xuá»‘ng */
.download-wrap {
  max-width: 980px;
  margin: 0 auto;
  width: 100%;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  padding: 18px 20px;

  /* ğŸ‘‡ rÃµ hÆ¡n */
  border: 1.5px solid rgba(0, 0, 0, 0.14);
  border-radius: 14px;
  background: #ffffff;
}

/* Text */
.download-title {
  font-size: 17px;
  font-weight: 600;
  color: #0f172a; /* Ä‘áº­m hÆ¡n chÃºt */
}

.download-desc {
  margin-top: 6px;
  font-size: 14.5px;
  color: #475569; /* Ä‘á»¡ má» */
  line-height: 1.6;
}

/* Button */
.download-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;

  padding: 11px 16px;
  border-radius: 12px;

  font-size: 15px;
  font-weight: 500;

  border: 1.5px solid #0984e3;
  background: #f8fafc;
  color: #0984e3;

  text-decoration: none;
  cursor: pointer;

  transition: all 0.15s ease;
}

.download-btn:hover {
  background: #eff6ff;
  border-color: #0984e3;
}

/* Windows icon */
.icon-win {
  color: #0984e3;
}

/* Mobile */
@media (max-width: 640px) {
  .download-wrap {
    flex-direction: column;
    align-items: stretch;
  }

  .download-btn {
    justify-content: center;
    width: 100%;
  }
}
</style>
